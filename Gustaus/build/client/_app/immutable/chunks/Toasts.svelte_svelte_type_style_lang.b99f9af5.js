import{f as g}from"./context.872a4bfa.js";import{w as _}from"./singletons.03378d0c.js";import{y as l}from"./scheduler.b9582851.js";const k=()=>globalThis[g],q=e=>globalThis[g]=e;let D=1;const v=()=>D++,s={closable:!1,duration:5e3,infinite:!1,rich:!1},z={start:.75,opacity:0,duration:150},h=e=>{if(typeof e=="number")return e;if(!/ms|s$/.test(e))throw new Error("[SVoast] `duration` prop was given a string but not a leading identifier (ms/s).");const n=parseFloat(e.split(/ms|s/)[0]);return/(?=ms)(?!s)/.test(e)?n:n*1e3},E=(e,n)=>({...e,...n}),a=_([]),c=(e,n,{opts:r,id:t})=>{var b;const i=t||v(),o=((b=r==null?void 0:r.component)==null?void 0:b[1])||{},{closable:y,component:w,infinite:m,rich:I,onMount:f,onRemove:u,duration:S}=E(s,r),T=h(S),A={id:i,type:e,message:n,duration:T,closable:y,component:w,infinite:m,rich:I,...o};return typeof window<"u"&&(f==null||f()),F(A,i),!m&&e!=="promise"&&setTimeout(()=>{d(i),u==null||u()},T),i},F=(e,n)=>{l(a).find(r=>r.id===n)?a.update(r=>r.map(t=>t.id===n?{...t,...e}:t)):a.update(r=>r=l(x).includes("bottom")?[...r,e]:[e,...r])},d=e=>{l(a).find(n=>n.id===e)&&a.update(n=>n.filter(r=>r.id!==e))},O=e=>{l(a)[e]&&a.update(n=>n.filter((r,t)=>e!==t))},U=()=>{a.set([])},N=(e,n=s)=>c("info",e,{opts:n}),P=(e,n=s)=>c("attention",e,{opts:n}),B=(e,n=s)=>c("success",e,{opts:n}),G=(e,n=s)=>c("warning",e,{opts:n}),L=(e,n=s)=>c("error",e,{opts:n}),R=(e,n)=>{var t;if(!(e instanceof Promise))throw Error("`promise` is not a valid Promise.");const r=c("promise",n.loading,{opts:n});(t=n==null?void 0:n.onStart)==null||t.call(n),e.then(i=>{var o;c("success",n.success,{opts:n,id:r}),(o=n==null?void 0:n.onSuccess)==null||o.call(n,i)}).catch(i=>{var o;c("error",n.error,{opts:n,id:r}),(o=n==null?void 0:n.onError)==null||o.call(n,i)}).finally(()=>{var i;n!=null&&n.infinite||setTimeout(()=>{d(r)},h(n.duration||s.duration)),(i=n==null?void 0:n.onFinish)==null||i.call(n)})},j=()=>{const{subscribe:e}=a;return{info:N,attention:P,success:B,warning:G,error:L,promise:R,removeById:d,removeByIndex:O,removeAll:U,subscribe:e}},C=j(),x=_("bottom-left");export{z as D,q as a,k as g,E as o,x as p,C as t};
