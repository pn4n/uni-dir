import{s as oe,n as G,m as ze,e as Ve,r as je,b as x,c as Oe,p as ne}from"../chunks/scheduler.4be4d217.js";import{S as ae,i as ie,g as k,m as j,h as E,j as O,n as R,f as g,k as C,a as M,B as p,G as Y,o as V,s as w,F,c as H,M as se,N as re,r as ue,e as De,u as ce,v as fe,d as U,t as S,w as _e,O as Re,p as Pe,b as Fe,C as Ue}from"../chunks/index.5e2710db.js";import{h as we,u as Se,L as Ge}from"../chunks/LoadingDirectus.9ed10323.js";import{e as ee,u as Je,d as Ye}from"../chunks/each.c9799802.js";import{t as ve}from"../chunks/Toasts.svelte_svelte_type_style_lang.da0ae53f.js";import{e as Ke}from"../chunks/forms.c000682b.js";function Qe(l){let e,t,s,i,u,n,a;return{c(){e=k("article"),t=k("button"),s=j("К оформлению (сумма: "),i=j(l[0]),u=j(" руб)"),this.h()},l(h){e=E(h,"ARTICLE",{class:!0});var c=O(e);t=E(c,"BUTTON",{class:!0,type:!0});var _=O(t);s=R(_,"К оформлению (сумма: "),i=R(_,l[0]),u=R(_," руб)"),_.forEach(g),c.forEach(g),this.h()},h(){C(t,"class","outline contrast svelte-2qu7md"),C(t,"type","button"),C(e,"class","grid svelte-2qu7md")},m(h,c){M(h,e,c),p(e,t),p(t,s),p(t,i),p(t,u),n||(a=Y(t,"click",l[1]),n=!0)},p(h,[c]){c&1&&V(i,h[0])},i:G,o:G,d(h){h&&g(e),n=!1,a()}}}function We(l,e,t){let{sum:s=0}=e,{dialog:i}=e;const u=()=>{i.showModal()};return l.$$set=n=>{"sum"in n&&t(0,s=n.sum),"dialog"in n&&t(2,i=n.dialog)},[s,u,i]}class Xe extends ae{constructor(e){super(),ie(this,e,We,Qe,oe,{sum:0,dialog:2})}}function He(l,e,t){const s=l.slice();return s[8]=e[t],s[10]=t,s}function Me(l,e){let t,s,i=e[8].counter+"",u,n,a,h=e[8].title+"",c,_,T,d=e[8].price+"",m,r,b,L=e[8].price*e[8].counter+"",y,N;return{key:l,first:null,c(){t=k("tr"),s=k("th"),u=j(i),n=w(),a=k("td"),c=j(h),_=w(),T=k("td"),m=j(d),r=w(),b=k("td"),y=j(L),N=w(),this.h()},l(I){t=E(I,"TR",{});var v=O(t);s=E(v,"TH",{scope:!0});var f=O(s);u=R(f,i),f.forEach(g),n=H(v),a=E(v,"TD",{});var o=O(a);c=R(o,h),o.forEach(g),_=H(v),T=E(v,"TD",{});var q=O(T);m=R(q,d),q.forEach(g),r=H(v),b=E(v,"TD",{});var B=O(b);y=R(B,L),B.forEach(g),N=H(v),v.forEach(g),this.h()},h(){C(s,"scope","row"),this.first=t},m(I,v){M(I,t,v),p(t,s),p(s,u),p(t,n),p(t,a),p(a,c),p(t,_),p(t,T),p(T,m),p(t,r),p(t,b),p(b,y),p(t,N)},p(I,v){e=I,v&2&&i!==(i=e[8].counter+"")&&V(u,i),v&2&&h!==(h=e[8].title+"")&&V(c,h),v&2&&d!==(d=e[8].price+"")&&V(m,d),v&2&&L!==(L=e[8].price*e[8].counter+"")&&V(y,L)},d(I){I&&g(t)}}}function Ze(l){let e,t,s='<tr><th scope="col">#</th> <th scope="col">Наименование</th> <th scope="col">Цена</th> <th scope="col">Стоимость</th></tr>',i,u,n=[],a=new Map,h,c,_,T,d="Всего",m,r,b,L,y,N,I,v,f,o,q,B,Z=`ФИО
        <input type="text" id="name" name="name" required=""/>`,$,K,be=`<label for="email">Email
        <input type="email" id="email" name="email"/></label> <label for="phone">Телефон
        <input type="phone" id="phone" name="phone" required=""/></label>`,he,Q,ke=`Адрес
      <input type="text" id="address" name="address"/>`,de,W,Ee=`Комментарий
      <input type="text" id="comment" name="comment"/>`,me,X,Te="Подтвердить заказ",te,pe,Ce,le=ee(Object.values(l[1]));const ye=D=>D[8].id;for(let D=0;D<le.length;D+=1){let A=He(l,le,D),z=ye(A);a.set(z,n[D]=Me(z,A))}return{c(){e=k("table"),t=k("thead"),t.innerHTML=s,i=w(),u=k("tbody");for(let D=0;D<n.length;D+=1)n[D].c();h=w(),c=k("tfoot"),_=k("tr"),T=k("th"),T.textContent=d,m=w(),r=k("td"),b=w(),L=k("td"),y=w(),N=k("td"),I=j(l[3]),v=w(),f=k("form"),o=k("input"),q=w(),B=k("label"),B.innerHTML=Z,$=w(),K=k("div"),K.innerHTML=be,he=w(),Q=k("label"),Q.innerHTML=ke,de=w(),W=k("label"),W.innerHTML=Ee,me=w(),X=k("button"),X.textContent=Te,this.h()},l(D){e=E(D,"TABLE",{});var A=O(e);t=E(A,"THEAD",{"data-svelte-h":!0}),F(t)!=="svelte-7j0l9b"&&(t.innerHTML=s),i=H(A),u=E(A,"TBODY",{});var z=O(u);for(let ge=0;ge<n.length;ge+=1)n[ge].l(z);z.forEach(g),h=H(A),c=E(A,"TFOOT",{});var Le=O(c);_=E(Le,"TR",{});var J=O(_);T=E(J,"TH",{scope:!0,"data-svelte-h":!0}),F(T)!=="svelte-u3m1v0"&&(T.textContent=d),m=H(J),r=E(J,"TD",{}),O(r).forEach(g),b=H(J),L=E(J,"TD",{}),O(L).forEach(g),y=H(J),N=E(J,"TD",{});var qe=O(N);I=R(qe,l[3]),qe.forEach(g),J.forEach(g),Le.forEach(g),A.forEach(g),v=H(D),f=E(D,"FORM",{method:!0});var P=O(f);o=E(P,"INPUT",{type:!0,id:!0,name:!0}),q=H(P),B=E(P,"LABEL",{for:!0,"data-svelte-h":!0}),F(B)!=="svelte-p0tin1"&&(B.innerHTML=Z),$=H(P),K=E(P,"DIV",{class:!0,"data-svelte-h":!0}),F(K)!=="svelte-1xh6r5c"&&(K.innerHTML=be),he=H(P),Q=E(P,"LABEL",{for:!0,"data-svelte-h":!0}),F(Q)!=="svelte-1fe0439"&&(Q.innerHTML=ke),de=H(P),W=E(P,"LABEL",{for:!0,"data-svelte-h":!0}),F(W)!=="svelte-1gv9dgb"&&(W.innerHTML=Ee),me=H(P),X=E(P,"BUTTON",{class:!0,"data-svelte-h":!0}),F(X)!=="svelte-1i6gog9"&&(X.textContent=Te),P.forEach(g),this.h()},h(){C(T,"scope","col"),C(o,"type","text"),C(o,"id","order"),C(o,"name","order"),o.hidden=!0,C(B,"for","name"),C(K,"class","grid"),C(Q,"for","address"),C(W,"for","comment"),C(X,"class","outline"),C(f,"method","POST")},m(D,A){M(D,e,A),p(e,t),p(e,i),p(e,u);for(let z=0;z<n.length;z+=1)n[z]&&n[z].m(u,null);p(e,h),p(e,c),p(c,_),p(_,T),p(_,m),p(_,r),p(_,b),p(_,L),p(_,y),p(_,N),p(N,I),M(D,v,A),M(D,f,A),p(f,o),se(o,l[4]),p(f,q),p(f,B),p(f,$),p(f,K),p(f,he),p(f,Q),p(f,de),p(f,W),p(f,me),p(f,X),l[6](f),pe||(Ce=[Y(o,"input",l[5]),ze(te=Ke.call(null,f,l[7]))],pe=!0)},p(D,[A]){A&2&&(le=ee(Object.values(D[1])),n=Je(n,A,ye,1,D,le,a,u,Ye,Me,null,He)),A&8&&V(I,D[3]),A&16&&o.value!==D[4]&&se(o,D[4]),te&&Ve(te.update)&&A&1&&te.update.call(null,D[7])},i:G,o:G,d(D){D&&(g(e),g(v),g(f));for(let A=0;A<n.length;A+=1)n[A].d();l[6](null),pe=!1,je(Ce)}}}function $e(l,e,t){let s,i,{cart_list:u}=e,{form_status:n}=e,a;function h(){s=this.value,t(4,s),t(1,u)}function c(T){x[T?"unshift":"push"](()=>{a=T,t(2,a)})}const _=()=>(t(0,n="loading"),async({update:T})=>{await T(),t(0,n="complete")});return l.$$set=T=>{"cart_list"in T&&t(1,u=T.cart_list),"form_status"in T&&t(0,n=T.form_status)},l.$$.update=()=>{l.$$.dirty&2&&t(4,s=JSON.stringify(u)),l.$$.dirty&4&&t(0,n=a==null?void 0:a.success),l.$$.dirty&2&&t(3,i=Object.values(u).reduce((T,d)=>T+d.price*d.counter,0))},[n,u,a,i,s,h,c,_]}class xe extends ae{constructor(e){super(),ie(this,e,$e,Ze,oe,{cart_list:1,form_status:0})}}function et(l){let e,t,s,i,u;return{c(){e=k("div"),t=k("img"),this.h()},l(n){e=E(n,"DIV",{"aria-busy":!0,class:!0});var a=O(e);t=E(a,"IMG",{src:!0,alt:!0,loading:!0,class:!0}),a.forEach(g),this.h()},h(){Oe(t.src,s=l[0])||C(t,"src",s),C(t,"alt",l[1]),C(t,"loading","lazy"),C(t,"class","svelte-1wj7nso"),C(e,"aria-busy",l[2]),C(e,"class","svelte-1wj7nso")},m(n,a){M(n,e,a),p(e,t),i||(u=Y(t,"load",l[3]),i=!0)},p(n,[a]){a&1&&!Oe(t.src,s=n[0])&&C(t,"src",s),a&2&&C(t,"alt",n[1]),a&4&&C(e,"aria-busy",n[2])},i:G,o:G,d(n){n&&g(e),i=!1,u()}}}function tt(l,e,t){let{src:s}=e,{alt:i}=e,u=!0;const n=()=>{t(2,u=!1)};return l.$$set=a=>{"src"in a&&t(0,s=a.src),"alt"in a&&t(1,i=a.alt)},[s,i,u,n]}class lt extends ae{constructor(e){super(),ie(this,e,tt,et,oe,{src:0,alt:1})}}function Ie(l,e,t){const s=l.slice();return s[20]=e[t],s}function Ae(l,e,t){const s=l.slice();return s[23]=e[t],s[24]=e,s[25]=t,s}function nt(l){let e,t="Directus is not connected",s,i,u=l[26].message+"",n;return{c(){e=k("p"),e.textContent=t,s=w(),i=k("p"),n=j(u),this.h()},l(a){e=E(a,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1rbgvyd"&&(e.textContent=t),s=H(a),i=E(a,"P",{class:!0});var h=O(i);n=R(h,u),h.forEach(g),this.h()},h(){C(e,"class","svelte-q5gu5o"),C(i,"class","svelte-q5gu5o")},m(a,h){M(a,e,h),M(a,s,h),M(a,i,h),p(i,n)},p(a,h){h&1&&u!==(u=a[26].message+"")&&V(n,u)},i:G,o:G,d(a){a&&(g(e),g(s),g(i))}}}function st(l){let e,t,s,i,u,n,a,h=ee(l[19].menu_items),c=[];for(let r=0;r<h.length;r+=1)c[r]=Ne(Ie(l,h,r));const _=r=>S(c[r],1,1,()=>{c[r]=null});function T(r){l[16](r)}function d(r){l[17](r)}let m={};return l[4]!==void 0&&(m.sum=l[4]),l[3]!==void 0&&(m.dialog=l[3]),s=new Xe({props:m}),x.push(()=>re(s,"sum",T)),x.push(()=>re(s,"dialog",d)),{c(){for(let r=0;r<c.length;r+=1)c[r].c();e=w(),t=k("div"),ue(s.$$.fragment),this.h()},l(r){for(let L=0;L<c.length;L+=1)c[L].l(r);e=H(r),t=E(r,"DIV",{});var b=O(t);ce(s.$$.fragment,b),b.forEach(g),this.h()},h(){t.hidden=n=l[4]<1},m(r,b){for(let L=0;L<c.length;L+=1)c[L]&&c[L].m(r,b);M(r,e,b),M(r,t,b),fe(s,t,null),a=!0},p(r,b){if(b&227){h=ee(r[19].menu_items);let y;for(y=0;y<h.length;y+=1){const N=Ie(r,h,y);c[y]?(c[y].p(N,b),U(c[y],1)):(c[y]=Ne(N),c[y].c(),U(c[y],1),c[y].m(e.parentNode,e))}for(Pe(),y=h.length;y<c.length;y+=1)_(y);Fe()}const L={};!i&&b&16&&(i=!0,L.sum=r[4],ne(()=>i=!1)),!u&&b&8&&(u=!0,L.dialog=r[3],ne(()=>u=!1)),s.$set(L),(!a||b&16&&n!==(n=r[4]<1))&&(t.hidden=n)},i(r){if(!a){for(let b=0;b<h.length;b+=1)U(c[b]);U(s.$$.fragment,r),a=!0}},o(r){c=c.filter(Boolean);for(let b=0;b<c.length;b+=1)S(c[b]);S(s.$$.fragment,r),a=!1},d(r){r&&(g(e),g(t)),Ue(c,r),_e(s)}}}function rt(l){let e,t="Добавить",s,i;function u(){return l[15](l[23])}return{c(){e=k("button"),e.textContent=t,this.h()},l(n){e=E(n,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-15vfxh8"&&(e.textContent=t),this.h()},h(){C(e,"class","outline svelte-q5gu5o")},m(n,a){M(n,e,a),s||(i=Y(e,"click",u),s=!0)},p(n,a){l=n},d(n){n&&g(e),s=!1,i()}}}function ot(l){let e,t="+",s,i,u,n,a="-",h,c;function _(){return l[12](l[23])}function T(){l[13].call(i,l[23])}function d(){return l[14](l[23])}return{c(){e=k("button"),e.textContent=t,s=w(),i=k("input"),u=w(),n=k("button"),n.textContent=a,this.h()},l(m){e=E(m,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1r7hn3j"&&(e.textContent=t),s=H(m),i=E(m,"INPUT",{type:!0,class:!0}),u=H(m),n=E(m,"BUTTON",{class:!0,"data-svelte-h":!0}),F(n)!=="svelte-gt5vgd"&&(n.textContent=a),this.h()},h(){C(e,"class","outline svelte-q5gu5o"),C(i,"type","number"),C(i,"class","svelte-q5gu5o"),C(n,"class","outline svelte-q5gu5o")},m(m,r){M(m,e,r),M(m,s,r),M(m,i,r),se(i,l[1][l[23].id].counter),M(m,u,r),M(m,n,r),h||(c=[Y(e,"click",_),Y(i,"input",T),Y(n,"click",d)],h=!0)},p(m,r){l=m,r&3&&Re(i.value)!==l[1][l[23].id].counter&&se(i,l[1][l[23].id].counter)},d(m){m&&(g(e),g(s),g(i),g(u),g(n)),h=!1,je(c)}}}function Be(l){let e,t,s=l[23].title+"",i,u,n,a,h,c,_=l[23].price+"",T,d,m,r,b,L,y;n=new lt({props:{src:l[19].url+"/assets/"+l[23].img,alt:"menu item"}});function N(f,o){return o&3&&(b=null),b==null&&(b=!!f[1].hasOwnProperty(f[23].id)),b?ot:rt}let I=N(l,-1),v=I(l);return{c(){e=k("article"),t=k("header"),i=j(s),u=w(),ue(n.$$.fragment),a=w(),h=k("footer"),c=k("p"),T=j(_),d=j(" руб"),m=w(),r=k("div"),v.c(),L=w(),this.h()},l(f){e=E(f,"ARTICLE",{class:!0});var o=O(e);t=E(o,"HEADER",{class:!0});var q=O(t);i=R(q,s),q.forEach(g),u=H(o),ce(n.$$.fragment,o),a=H(o),h=E(o,"FOOTER",{class:!0});var B=O(h);c=E(B,"P",{class:!0});var Z=O(c);T=R(Z,_),d=R(Z," руб"),Z.forEach(g),m=H(B),r=E(B,"DIV",{class:!0});var $=O(r);v.l($),$.forEach(g),B.forEach(g),L=H(o),o.forEach(g),this.h()},h(){C(t,"class","svelte-q5gu5o"),C(c,"class","svelte-q5gu5o"),C(r,"class","grid svelte-q5gu5o"),C(h,"class","svelte-q5gu5o"),C(e,"class","container svelte-q5gu5o")},m(f,o){M(f,e,o),p(e,t),p(t,i),p(e,u),fe(n,e,null),p(e,a),p(e,h),p(h,c),p(c,T),p(c,d),p(h,m),p(h,r),v.m(r,null),p(e,L),y=!0},p(f,o){(!y||o&1)&&s!==(s=f[23].title+"")&&V(i,s);const q={};o&1&&(q.src=f[19].url+"/assets/"+f[23].img),n.$set(q),(!y||o&1)&&_!==(_=f[23].price+"")&&V(T,_),I===(I=N(f,o))&&v?v.p(f,o):(v.d(1),v=I(f),v&&(v.c(),v.m(r,null)))},i(f){y||(U(n.$$.fragment,f),y=!0)},o(f){S(n.$$.fragment,f),y=!1},d(f){f&&g(e),_e(n),v.d()}}}function Ne(l){let e,t=l[20].title+"",s,i,u,n,a,h,c=ee(l[20].items),_=[];for(let d=0;d<c.length;d+=1)_[d]=Be(Ae(l,c,d));const T=d=>S(_[d],1,1,()=>{_[d]=null});return{c(){e=k("h1"),s=j(t),i=w(),u=k("div");for(let d=0;d<_.length;d+=1)_[d].c();n=w(),a=k("hr"),this.h()},l(d){e=E(d,"H1",{});var m=O(e);s=R(m,t),m.forEach(g),i=H(d),u=E(d,"DIV",{class:!0});var r=O(u);for(let b=0;b<_.length;b+=1)_[b].l(r);r.forEach(g),n=H(d),a=E(d,"HR",{}),this.h()},h(){C(u,"class","grid-container svelte-q5gu5o")},m(d,m){M(d,e,m),p(e,s),M(d,i,m),M(d,u,m);for(let r=0;r<_.length;r+=1)_[r]&&_[r].m(u,null);M(d,n,m),M(d,a,m),h=!0},p(d,m){if((!h||m&1)&&t!==(t=d[20].title+"")&&V(s,t),m&227){c=ee(d[20].items);let r;for(r=0;r<c.length;r+=1){const b=Ae(d,c,r);_[r]?(_[r].p(b,m),U(_[r],1)):(_[r]=Be(b),_[r].c(),U(_[r],1),_[r].m(u,null))}for(Pe(),r=c.length;r<_.length;r+=1)T(r);Fe()}},i(d){if(!h){for(let m=0;m<c.length;m+=1)U(_[m]);h=!0}},o(d){_=_.filter(Boolean);for(let m=0;m<_.length;m+=1)S(_[m]);h=!1},d(d){d&&(g(e),g(i),g(u),g(n),g(a)),Ue(_,d)}}}function at(l){let e,t;return e=new Ge({}),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){fe(e,s,i),t=!0},p:G,i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){_e(e,s)}}}function it(l){let e,t,s,i,u,n,a,h,c,_,T,d,m,r,b,L;function y(f){l[9](f)}function N(f){l[10](f)}let I={};l[1]!==void 0&&(I.cart_list=l[1]),l[2]!==void 0&&(I.form_status=l[2]),a=new xe({props:I}),x.push(()=>re(a,"cart_list",y)),x.push(()=>re(a,"form_status",N));let v={ctx:l,current:null,token:null,hasCatch:!0,pending:at,then:st,catch:nt,value:19,error:26,blocks:[,,,]};return we(m=l[0].streamed.dir,v),{c(){e=k("dialog"),t=k("article"),s=k("header"),i=k("a"),u=j(`
            Подверждение заказа`),n=w(),ue(a.$$.fragment),T=w(),d=De(),v.block.c(),this.h()},l(f){e=E(f,"DIALOG",{class:!0});var o=O(e);t=E(o,"ARTICLE",{class:!0});var q=O(t);s=E(q,"HEADER",{class:!0});var B=O(s);i=E(B,"A",{href:!0,"aria-label":!0,class:!0}),O(i).forEach(g),u=R(B,`
            Подверждение заказа`),B.forEach(g),n=H(q),ce(a.$$.fragment,q),q.forEach(g),o.forEach(g),T=H(f),d=De(),v.block.l(f),this.h()},h(){C(i,"href","#close"),C(i,"aria-label","Close"),C(i,"class","close"),C(s,"class","default svelte-q5gu5o"),t.hidden=_=l[4]<1,C(t,"class","default svelte-q5gu5o"),C(e,"class","svelte-q5gu5o")},m(f,o){M(f,e,o),p(e,t),p(t,s),p(s,i),p(s,u),p(t,n),fe(a,t,null),l[11](e),M(f,T,o),M(f,d,o),v.block.m(f,v.anchor=o),v.mount=()=>d.parentNode,v.anchor=d,r=!0,b||(L=Y(i,"click",l[8]),b=!0)},p(f,[o]){l=f;const q={};!h&&o&2&&(h=!0,q.cart_list=l[1],ne(()=>h=!1)),!c&&o&4&&(c=!0,q.form_status=l[2],ne(()=>c=!1)),a.$set(q),(!r||o&16&&_!==(_=l[4]<1))&&(t.hidden=_),v.ctx=l,o&1&&m!==(m=l[0].streamed.dir)&&we(m,v)||Se(v,l,o)},i(f){r||(U(a.$$.fragment,f),U(v.block),r=!0)},o(f){S(a.$$.fragment,f);for(let o=0;o<3;o+=1){const q=v.blocks[o];S(q)}r=!1},d(f){f&&(g(e),g(T),g(d)),_e(a),l[11](null),v.block.d(f),v.token=null,v=null,b=!1,L()}}}function ut(l,e,t){let s,{data:i}=e,u,n={},a;const h=o=>{const q=i.streamed.dir.items.find(B=>B.id===o);t(1,n[o]={title:q.title,price:q.price,counter:1},n)},c=o=>{t(1,n[o].counter++,n)},_=o=>{t(1,n[o].counter--,n),n[o].counter<1&&delete n[o]},T=o=>{o=="complete"&&(ve.removeAll(),ve.success("Заявка принята")),o=="loading"&&(t(1,n={}),t(4,s=0),u.close(),ve.info("Загрузка..."))},d=()=>u.close();function m(o){n=o,t(1,n)}function r(o){a=o,t(2,a)}function b(o){x[o?"unshift":"push"](()=>{u=o,t(3,u)})}const L=o=>c(o.id);function y(o){n[o.id].counter=Re(this.value),t(1,n)}const N=o=>_(o.id),I=o=>h(o.id);function v(o){s=o,t(4,s),t(1,n)}function f(o){u=o,t(3,u)}return l.$$set=o=>{"data"in o&&t(0,i=o.data)},l.$$.update=()=>{l.$$.dirty&2&&t(4,s=Object.values(n).reduce((o,q)=>o+q.price*q.counter,0)),l.$$.dirty&4&&T(a)},[i,n,a,u,s,h,c,_,d,m,r,b,L,y,N,I,v,f]}class pt extends ae{constructor(e){super(),ie(this,e,ut,it,oe,{data:0})}}export{pt as component};
