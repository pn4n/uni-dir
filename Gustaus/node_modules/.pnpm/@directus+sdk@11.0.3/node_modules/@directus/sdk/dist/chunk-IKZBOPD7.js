var g=e=>({url:new URL(e),with(t){return{...this,...t(this)}}});var h=async(e,t,r)=>{t.headers=typeof t.headers=="object"&&!Array.isArray(t.headers)?t.headers:{};let a=r??(s=>typeof s=="object"&&s&&"data"in s?s.data:s),m=await globalThis.fetch(e,t).then(async s=>{let i=s.headers.get("Content-Type")?.toLowerCase();if(i?.startsWith("application/json")){let c=await s.json();if(!s.ok)throw c;return c}if(i?.startsWith("text/html")||i?.startsWith("text/plain")){let c=await s.text();if(!s.ok)throw c;return c}}).catch(s=>{throw s});return a(m)};var E=()=>e=>({async query(t,r,o="items"){let a={method:"POST",body:JSON.stringify({query:t,variables:r})},m={};if("getToken"in this){let c=await this.getToken();c&&(m.Authorization=`Bearer ${c}`)}"Content-Type"in m||(m["Content-Type"]="application/json"),a.headers=m;let s=o==="items"?"/graphql":"/graphql/system",i=u(e.url,s);return await h(i.toString(),a)}});var k=(e,t,r={})=>()=>{let o=r.provider?`/auth/login/${r.provider}`:"/auth/login",a={email:e,password:t};return"otp"in r&&(a.otp=r.otp),"mode"in r&&(a.mode=r.mode),{path:o,method:"POST",body:JSON.stringify(a)}};var J=e=>()=>({path:"/auth/logout",method:"POST",body:JSON.stringify({refresh_token:e})});var G=(e,t)=>()=>({path:"/auth/password/request",method:"POST",body:JSON.stringify({email:e,...t?{reset_url:t}:{}})});var _=(e,t)=>()=>({path:"/auth/password/reset",method:"POST",body:JSON.stringify({token:e,password:t})});var H=()=>()=>({path:"/auth",method:"GET"});var M=(e,t="json")=>()=>({path:"/auth/refresh",method:"POST",body:JSON.stringify({refresh_token:e,...t?{mode:t}:{}})});var te=(e,t)=>()=>({path:"/activity/comment",params:t??{},body:JSON.stringify(e),method:"POST"});var oe=(e,t)=>()=>({path:"/collections",params:t??{},body:JSON.stringify(e),method:"POST"});var ae=(e,t)=>()=>({path:"/dashboards",params:t??{},body:JSON.stringify(e),method:"POST"}),me=(e,t)=>()=>({path:"/dashboards",params:t??{},body:JSON.stringify(e),method:"POST"});var ie=(e,t,r)=>()=>({path:`/fields/${e}`,params:r??{},body:JSON.stringify(t),method:"POST"});var pe=(e,t)=>()=>({path:"/files",method:"POST",body:e,params:t??{},headers:{"Content-Type":"multipart/form-data"}}),de=(e,t={},r)=>()=>({path:"/files/import",method:"POST",body:JSON.stringify({url:e,data:t}),params:r??{}});var ue=(e,t)=>()=>({path:"/flows",params:t??{},body:JSON.stringify(e),method:"POST"}),ye=(e,t)=>()=>({path:"/flows",params:t??{},body:JSON.stringify(e),method:"POST"});var le=(e,t)=>()=>({path:"/folders",params:t??{},body:JSON.stringify(e),method:"POST"}),xe=(e,t)=>()=>({path:"/folders",params:t??{},body:JSON.stringify(e),method:"POST"});var Qe=(e,t,r)=>()=>{let o=String(e);if(o.startsWith("directus_"))throw new Error("Cannot use createItems for core collections");return{path:`/items/${o}`,params:r??{},body:JSON.stringify(t),method:"POST"}},Te=(e,t,r)=>()=>{let o=String(e);if(o.startsWith("directus_"))throw new Error("Cannot use createItem for core collections");return{path:`/items/${o}`,params:r??{},body:JSON.stringify(t),method:"POST"}};var be=(e,t)=>()=>({path:"/notifications",params:t??{},body:JSON.stringify(e),method:"POST"}),Ce=(e,t)=>()=>({path:"/notifications",params:t??{},body:JSON.stringify(e),method:"POST"});var De=(e,t)=>()=>({path:"/operations",params:t??{},body:JSON.stringify(e),method:"POST"}),Oe=(e,t)=>()=>({path:"/operations",params:t??{},body:JSON.stringify(e),method:"POST"});var Pe=(e,t)=>()=>({path:"/panels",params:t??{},body:JSON.stringify(e),method:"POST"}),Fe=(e,t)=>()=>({path:"/panels",params:t??{},body:JSON.stringify(e),method:"POST"});var Ie=(e,t)=>()=>({path:"/permissions",params:t??{},body:JSON.stringify(e),method:"POST"}),Ee=(e,t)=>()=>({path:"/permissions",params:t??{},body:JSON.stringify(e),method:"POST"});var we=(e,t)=>()=>({path:"/presets",params:t??{},body:JSON.stringify(e),method:"POST"}),ve=(e,t)=>()=>({path:"/presets",params:t??{},body:JSON.stringify(e),method:"POST"});var Ue=e=>()=>({path:"/relations",body:JSON.stringify(e),method:"POST"});var $e=(e,t)=>()=>({path:"/roles",params:t??{},body:JSON.stringify(e),method:"POST"}),Ge=(e,t)=>()=>({path:"/roles",params:t??{},body:JSON.stringify(e),method:"POST"});var _e=(e,t)=>()=>({path:"/shares",params:t??{},body:JSON.stringify(e),method:"POST"}),Le=(e,t)=>()=>({path:"/shares",params:t??{},body:JSON.stringify(e),method:"POST"});var Be=(e,t)=>()=>({path:"/translations",params:t??{},body:JSON.stringify(e),method:"POST"}),Me=(e,t)=>()=>({path:"/translations",params:t??{},body:JSON.stringify(e),method:"POST"});var ze=(e,t)=>()=>({path:"/users",params:t??{},body:JSON.stringify(e),method:"POST"}),Ve=(e,t)=>()=>({path:"/users",params:t??{},body:JSON.stringify(e),method:"POST"});var Ke=(e,t)=>()=>({path:"/webhooks",params:t??{},body:JSON.stringify(e),method:"POST"}),Ye=(e,t)=>()=>({path:"/webhooks",params:t??{},body:JSON.stringify(e),method:"POST"});var Tt=e=>()=>({path:`/activity/comment/${e}`,method:"DELETE"});var bt=e=>()=>({path:`/collections/${e}`,method:"DELETE"});var Rt=e=>()=>({path:"/dashboards",body:JSON.stringify(e),method:"DELETE"}),Dt=e=>()=>({path:`/dashboards/${e}`,method:"DELETE"});var gt=(e,t)=>()=>({path:`/fields/${e}/${t}`,method:"DELETE"});var Ft=e=>()=>({path:"/files",body:JSON.stringify(e),method:"DELETE"}),At=e=>()=>({path:`/files/${e}`,method:"DELETE"});var Et=e=>()=>({path:"/flows",body:JSON.stringify(e),method:"DELETE"}),Nt=e=>()=>({path:`/flows/${e}`,method:"DELETE"});var vt=e=>()=>({path:"/folders",body:JSON.stringify(e),method:"DELETE"}),kt=e=>()=>({path:`/folders/${e}`,method:"DELETE"});var Jt=(e,t)=>()=>{let r=String(e);if(r.startsWith("directus_"))throw new Error("Cannot use deleteItems for core collections");return{path:`/items/${r}`,body:JSON.stringify(Array.isArray(t)?{keys:t}:{query:t}),method:"DELETE"}},$t=(e,t)=>()=>{let r=String(e);if(r.startsWith("directus_"))throw new Error("Cannot use deleteItem for core collections");return{path:`/items/${r}/${t}`,method:"DELETE"}};var Wt=e=>()=>({path:"/notifications",body:JSON.stringify(e),method:"DELETE"}),_t=e=>()=>({path:`/notifications/${e}`,method:"DELETE"});var Ht=e=>()=>({path:"/operations",body:JSON.stringify(e),method:"DELETE"}),Bt=e=>()=>({path:`/operations/${e}`,method:"DELETE"});var qt=e=>()=>({path:"/panels",body:JSON.stringify(e),method:"DELETE"}),zt=e=>()=>({path:`/panels/${e}`,method:"DELETE"});var Xt=e=>()=>({path:"/permissions",body:JSON.stringify(e),method:"DELETE"}),Kt=e=>()=>({path:`/permissions/${e}`,method:"DELETE"});var Zt=e=>()=>({path:"/presets",body:JSON.stringify(e),method:"DELETE"}),er=e=>()=>({path:`/presets/${e}`,method:"DELETE"});var rr=(e,t)=>()=>({path:`/relations/${e}/${t}`,method:"DELETE"});var sr=e=>()=>({path:"/roles",body:JSON.stringify(e),method:"DELETE"}),ar=e=>()=>({path:`/roles/${e}`,method:"DELETE"});var cr=e=>()=>({path:"/shares",body:JSON.stringify(e),method:"DELETE"}),ir=e=>()=>({path:`/shares/${e}`,method:"DELETE"});var pr=e=>()=>({path:"/translations",body:JSON.stringify(e),method:"DELETE"}),dr=e=>()=>({path:`/translations/${e}`,method:"DELETE"});var ur=e=>()=>({path:"/users",body:JSON.stringify(e),method:"DELETE"}),yr=e=>()=>({path:`/users/${e}`,method:"DELETE"});var lr=e=>()=>({path:"/webhooks",body:JSON.stringify(e),method:"DELETE"}),xr=e=>()=>({path:`/webhooks/${e}`,method:"DELETE"});var $r=e=>()=>({path:"/activity",params:e??{},method:"GET"}),Gr=(e,t)=>()=>({path:`/activity/${e}`,params:t??{},method:"GET"});var _r=(e,t)=>()=>{let r=e;return{path:r.startsWith("directus_")?`/${r.substring(9)}`:`/items/${r}`,method:"GET",params:{...t.query??{},...t.groupBy?{groupBy:t.groupBy}:{},aggregate:t.aggregate}}};var Hr=()=>()=>({path:"/collections",method:"GET"}),Br=e=>()=>({path:`/collections/${e}`,method:"GET"});var qr=e=>()=>({path:"/dashboards",params:e??{},method:"GET"}),zr=(e,t)=>()=>({path:`/dashboards/${e}`,params:t??{},method:"GET"});var Xr=e=>()=>({path:`/extensions/${e}`,method:"GET"});var Yr=()=>()=>({path:"/fields",method:"GET"}),Zr=e=>()=>({path:`/fields/${e}`,method:"GET"}),eo=(e,t)=>()=>({path:`/fields/${e}/${t}`,method:"GET"});var ro=e=>()=>({path:"/files",params:e??{},method:"GET"}),oo=(e,t)=>()=>({path:`/files/${e}`,params:t??{},method:"GET"});var ao=e=>()=>({path:"/flows",params:e??{},method:"GET"}),mo=(e,t)=>()=>({path:`/flows/${e}`,params:t??{},method:"GET"});var io=e=>()=>({path:"/folders",params:e??{},method:"GET"}),no=(e,t)=>()=>({path:`/folders/${e}`,params:t??{},method:"GET"});var ho=(e,t)=>()=>{let r=String(e);if(r.startsWith("directus_"))throw new Error("Cannot use readItems for core collections");return{path:`/items/${r}`,params:t??{},method:"GET"}},uo=(e,t,r)=>()=>{let o=String(e);if(o.startsWith("directus_"))throw new Error("Cannot use readItem for core collections");return{path:`/items/${o}/${t}`,params:r??{},method:"GET"}};var So=e=>()=>({path:"/notifications",params:e??{},method:"GET"}),lo=(e,t)=>()=>({path:`/notifications/${e}`,params:t??{},method:"GET"});var fo=e=>()=>({path:"/operations",params:e??{},method:"GET"}),Qo=(e,t)=>()=>({path:`/operations/${e}`,params:t??{},method:"GET"});var jo=e=>()=>({path:"/panels",params:e??{},method:"GET"}),bo=(e,t)=>()=>({path:`/panels/${e}`,params:t??{},method:"GET"});var Ro=e=>()=>({path:"/permissions",params:e??{},method:"GET"}),Do=(e,t)=>()=>({path:`/permissions/${e}`,params:t??{},method:"GET"});var go=e=>()=>({path:"/presets",params:e??{},method:"GET"}),Po=(e,t)=>()=>({path:`/presets/${e}`,params:t??{},method:"GET"});var Ao=()=>()=>({path:"/relations",method:"GET"}),Io=e=>()=>({path:`/relations/${e}`,method:"GET"}),Eo=(e,t)=>()=>({path:`/relations/${e}/${t}`,method:"GET"});var wo=e=>()=>({path:"/revisions",params:e??{},method:"GET"}),vo=(e,t)=>()=>({path:`/revisions/${e}`,params:t??{},method:"GET"});var Uo=e=>()=>({path:"/roles",params:e??{},method:"GET"}),Jo=(e,t)=>()=>({path:`/roles/${e}`,params:t??{},method:"GET"});var Go=e=>()=>({path:"/settings",params:e??{},method:"GET"});var _o=e=>()=>({path:"/shares",params:e??{},method:"GET"}),Lo=(e,t)=>()=>({path:`/shares/${e}`,params:t??{},method:"GET"});var Bo=(e,t)=>()=>{let r=String(e);if(r.startsWith("directus_"))throw new Error("Cannot use readSingleton for core collections");return{path:`/items/${r}`,params:t??{},method:"GET"}};var qo=e=>()=>({path:"/translations",params:e??{},method:"GET"}),zo=(e,t)=>()=>({path:`/translations/${e}`,params:t??{},method:"GET"});var Xo=e=>()=>({path:"/users",params:e??{},method:"GET"}),Ko=(e,t)=>()=>({path:`/users/${e}`,params:t??{},method:"GET"}),Yo=e=>()=>({path:"/users/me",params:e??{},method:"GET"});var es=e=>()=>({path:"/webhooks",params:e??{},method:"GET"}),ts=(e,t)=>()=>({path:`/webhooks/${e}`,params:t??{},method:"GET"});var Ps=e=>()=>({method:"POST",path:"/schema/apply",body:JSON.stringify(e)});var As=(e,t=!1)=>()=>({method:"POST",path:"/schema/diff",params:t?{force:t}:{},body:JSON.stringify(e)});var Es=()=>()=>({method:"GET",path:"/schema/snapshot"});var Js=(e="item")=>()=>({method:"GET",path:e==="item"?"/server/specs/graphql":"/server/specs/graphql/system"});var Gs=()=>()=>({method:"GET",path:"/server/health"});var _s=()=>()=>({method:"GET",path:"/server/info"});var Hs=()=>()=>({method:"GET",path:"/server/specs/oas"});var Ms=()=>()=>({method:"GET",path:"/server/ping"});var ea=(e,t,r)=>()=>({path:`/activity/comment/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var ra=(e,t,r)=>()=>({path:`/collections/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var sa=(e,t,r)=>()=>({path:"/dashboards",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),aa=(e,t,r)=>()=>({path:`/dashboards/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var ca=(e,t,r,o)=>()=>({path:`/fields/${e}/${t}`,params:o??{},body:JSON.stringify(r),method:"PATCH"});var na=(e,t,r)=>()=>({path:"/files",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),pa=(e,t,r)=>()=>({path:`/files/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var ha=(e,t,r)=>()=>({path:"/flows",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),ua=(e,t,r)=>()=>({path:`/flows/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Sa=(e,t,r)=>()=>({path:"/folders",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),la=(e,t,r)=>()=>({path:`/folders/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var fa=(e,t,r,o)=>()=>({path:`/items/${String(e)}`,params:o??{},body:JSON.stringify({keys:t,data:r}),method:"PATCH"}),Qa=(e,t,r,o)=>()=>{let a=String(e);if(a.startsWith("directus_"))throw new Error("Cannot use updateItem for core collections");return{path:`/items/${a}/${t}`,params:o??{},body:JSON.stringify(r),method:"PATCH"}};var ja=(e,t,r)=>()=>({path:"/notifications",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),ba=(e,t,r)=>()=>({path:`/notifications/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Ra=(e,t,r)=>()=>({path:"/operations",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Da=(e,t,r)=>()=>({path:`/operations/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var ga=(e,t,r)=>()=>({path:"/panels",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Pa=(e,t,r)=>()=>({path:`/panels/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Aa=(e,t,r)=>()=>({path:"/permissions",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Ia=(e,t,r)=>()=>({path:`/permissions/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Na=(e,t,r)=>()=>({path:"/presets",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),wa=(e,t,r)=>()=>({path:`/presets/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var ka=(e,t,r,o)=>()=>({path:`/relations/${e}/${t}`,params:o??{},body:JSON.stringify(r),method:"PATCH"});var Ja=(e,t,r)=>()=>({path:"/roles",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),$a=(e,t,r)=>()=>({path:`/roles/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Wa=(e,t)=>()=>({path:"/settings",params:t??{},body:JSON.stringify(e),method:"PATCH"});var La=(e,t,r)=>()=>({path:"/shares",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Ha=(e,t,r)=>()=>({path:`/shares/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Ma=(e,t,r)=>()=>{let o=String(e);if(o.startsWith("directus_"))throw new Error("Cannot use updateSingleton for core collections");return{path:`/items/${o}`,params:r??{},body:JSON.stringify(t),method:"PATCH"}};var za=(e,t,r)=>()=>({path:"/translations",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Va=(e,t,r)=>()=>({path:`/translations/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Ka=(e,t,r)=>()=>({path:"/users",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),Ya=(e,t,r)=>()=>({path:`/users/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"}),Za=(e,t)=>()=>({path:"/users/me",params:t??{},body:JSON.stringify(e),method:"PATCH"});var tm=(e,t,r)=>()=>({path:"/webhooks",params:r??{},body:JSON.stringify({keys:e,data:t}),method:"PATCH"}),rm=(e,t,r)=>()=>({path:`/webhooks/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"});var Om=()=>()=>({method:"POST",path:"/utils/cache/clear"});var Pm=(e,t,r,o)=>()=>({method:"POST",path:`/utils/export/${e}`,body:JSON.stringify({format:t,query:r,file:o})});var Am=(e,t,r)=>()=>e==="GET"?{path:`/flows/trigger/${t}`,params:r??{},method:"GET"}:{path:`/flows/trigger/${t}`,body:JSON.stringify(r??{}),method:"POST"};var Em=e=>()=>({method:"POST",path:"/utils/hash/generate",body:JSON.stringify({string:e})}),Nm=(e,t)=>()=>({method:"POST",path:"/utils/hash/verify",body:JSON.stringify({string:e,hash:t})});var vm=(e,t)=>()=>({path:`/utils/import/${e}`,method:"POST",body:t,headers:{"Content-Type":"multipart/form-data"}});var Um=(e,t)=>()=>({path:`/operations/trigger/${e}`,body:JSON.stringify(t??{}),method:"POST"});var $m=(e,t)=>()=>({path:"/shares/auth",method:"POST",body:JSON.stringify({share:e,password:t})}),Gm=(e,t)=>()=>({path:"/shares/invite",method:"POST",body:JSON.stringify({share:e,emails:t})}),Wm=e=>()=>({path:`/shares/info/${e}`,method:"GET"});var Lm=(e,t,r)=>()=>({method:"POST",path:`/utils/sort/${e}`,body:JSON.stringify({item:t,to:r})});var Bm=(e,t,r)=>()=>({path:"/users/invite",method:"POST",body:JSON.stringify({email:e,role:t,...r?{invite_url:r}:{}})}),Mm=(e,t)=>()=>({path:"/users/invite/accept",method:"POST",body:JSON.stringify({token:e,password:t})}),qm=e=>()=>({path:"/users/me/tfa/generate",method:"POST",body:JSON.stringify({password:e})}),zm=(e,t)=>()=>({path:"/users/me/tfa/enable",method:"POST",body:JSON.stringify({secret:e,otp:t})}),Vm=e=>()=>({path:"/users/me/tfa/disable",method:"POST",body:JSON.stringify({otp:e})});var fc=(e={})=>t=>({async request(r){let o=r();if(o.headers||(o.headers={}),"Content-Type"in o.headers?o.headers["Content-Type"]==="multipart/form-data"&&delete o.headers["Content-Type"]:o.headers["Content-Type"]="application/json","getToken"in this){let c=await this.getToken();c&&(o.headers||(o.headers={}),o.headers.Authorization=`Bearer ${c}`)}let a=u(t.url,o.path,o.params),m={method:o.method??"GET",headers:o.headers??{}};o.body&&(m.body=o.body),o.onRequest&&(m=await o.onRequest(m)),e.onRequest&&(m=await e.onRequest(m));let s;return e.onResponse&&o.onResponse?s=c=>Promise.resolve(c).then(e.onResponse).then(o.onResponse):"onResponse"in o?s=o.onResponse:"onResponse"in e&&(s=e.onResponse),await h(a.toString(),m,s)}});var R=e=>{let t={};if(Array.isArray(e.fields)&&e.fields.length>0){let r=(o,a=[])=>{if(typeof o=="object"){let m=[];for(let s in o){let i=o[s]??[];if(Array.isArray(i))for(let c of i)m.push(r(c,[...a,s]));else if(typeof i=="object")for(let c of Object.keys(i)){let S=i[c];for(let f of S)m.push(r(f,[...a,`${s}:${c}`]))}}return m.flatMap(s=>s)}return[...a,String(o)].join(".")};t.fields=e.fields.flatMap(o=>r(o)).join(",")}return e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(t.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(t.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(",")),t};function jc(e,t){return()=>{let r=t();return e&&(r.headers||(r.headers={}),r.headers.Authorization=`Bearer ${e}`),r}}function Cc(e){return()=>{let t=e();return t.method==="GET"&&(t.method="SEARCH",t.body=JSON.stringify({query:t.params}),delete t.params),t}}var x="/",O=(e,t)=>(e.endsWith(x)&&(e=e.slice(0,-1)),t.startsWith(x)||(t=x+t),e+t),u=(e,t,r)=>{let o=e.pathname===x?t:O(e.pathname,t),a=new globalThis.URL(o,e);if(r)for(let[m,s]of Object.entries(R(r)))if(s&&typeof s=="object"&&!Array.isArray(s))for(let[i,c]of Object.entries(s))a.searchParams.set(`${m}[${i}]`,String(c));else a.searchParams.set(m,s);return a};var D=()=>{let e=null;return{get:async()=>e,set:async t=>{e=t}}};var j={msRefreshBeforeExpires:3e4,autoRefresh:!0},yi=(e="cookie",t={})=>r=>{t={...j,...t};let o=null,a=null,m=t.storage??D(),s="autoRefresh"in t?t.autoRefresh:j.autoRefresh,i=typeof t.msRefreshBeforeExpires=="number"?t.msRefreshBeforeExpires:j.msRefreshBeforeExpires,c=()=>{m.set({access_token:null,refresh_token:null,expires:null,expires_at:null})},S=async()=>{try{await o}finally{o=null}},f=async()=>{let n=await m.get();if(o||!n?.expires_at){await S();return}n.expires_at<new Date().getTime()+i&&Q().catch(p=>{}),await S()},b=n=>{let p=n.expires??0;n.expires_at=new Date().getTime()+p,m.set(n),s&&p>i&&p<Number.MAX_SAFE_INTEGER&&(a&&clearTimeout(a),a=setTimeout(()=>{a=null,Q().catch(d=>{})},p-i))},Q=async()=>(o=(async()=>{let p=await m.get();c();let d={method:"POST",headers:{"Content-Type":"application/json"}};e==="json"&&p?.refresh_token&&(d.body=JSON.stringify({refresh_token:p.refresh_token}));let T=u(r.url,"/auth/refresh"),l=await h(T.toString(),d).catch(y=>{throw y});return b(l),l})().catch(p=>{throw p}),o);return{refresh:Q,async login(n,p,d={}){c();let T=d.provider?`/auth/login/${d.provider}`:"/auth/login",l=u(r.url,T),y={email:n,password:p};"otp"in d&&(y.otp=d.otp),"mode"in d&&(y.mode=d.mode);let C=await h(l.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});return b(C),C},async logout(){let n=await m.get(),p={method:"POST",headers:{"Content-Type":"application/json"}};e==="json"&&n?.refresh_token&&(p.body=JSON.stringify({refresh_token:n.refresh_token}));let d=u(r.url,"/auth/logout");await h(d.toString(),p,null),a&&clearTimeout(a),c()},async getToken(){return await f(),(await m.get())?.access_token??null},setToken(n){m.set({access_token:n,refresh_token:null,expires:null,expires_at:null})}}};var li=e=>t=>{let r=e??null;return{async getToken(){return r},setToken(o){r=o}}};export{D as a,yi as b,li as c,g as d,E as e,k as f,J as g,G as h,_ as i,H as j,M as k,te as l,oe as m,ae as n,me as o,ie as p,pe as q,de as r,ue as s,ye as t,le as u,xe as v,Qe as w,Te as x,be as y,Ce as z,De as A,Oe as B,Pe as C,Fe as D,Ie as E,Ee as F,we as G,ve as H,Ue as I,$e as J,Ge as K,_e as L,Le as M,Be as N,Me as O,ze as P,Ve as Q,Ke as R,Ye as S,Tt as T,bt as U,Rt as V,Dt as W,gt as X,Ft as Y,At as Z,Et as _,Nt as $,vt as aa,kt as ba,Jt as ca,$t as da,Wt as ea,_t as fa,Ht as ga,Bt as ha,qt as ia,zt as ja,Xt as ka,Kt as la,Zt as ma,er as na,rr as oa,sr as pa,ar as qa,cr as ra,ir as sa,pr as ta,dr as ua,ur as va,yr as wa,lr as xa,xr as ya,$r as za,Gr as Aa,_r as Ba,Hr as Ca,Br as Da,qr as Ea,zr as Fa,Xr as Ga,Yr as Ha,Zr as Ia,eo as Ja,ro as Ka,oo as La,ao as Ma,mo as Na,io as Oa,no as Pa,ho as Qa,uo as Ra,So as Sa,lo as Ta,fo as Ua,Qo as Va,jo as Wa,bo as Xa,Ro as Ya,Do as Za,go as _a,Po as $a,Ao as ab,Io as bb,Eo as cb,wo as db,vo as eb,Uo as fb,Jo as gb,Go as hb,_o as ib,Lo as jb,Bo as kb,qo as lb,zo as mb,Xo as nb,Ko as ob,Yo as pb,es as qb,ts as rb,Ps as sb,As as tb,Es as ub,Js as vb,Gs as wb,_s as xb,Hs as yb,Ms as zb,ea as Ab,ra as Bb,sa as Cb,aa as Db,ca as Eb,na as Fb,pa as Gb,ha as Hb,ua as Ib,Sa as Jb,la as Kb,fa as Lb,Qa as Mb,ja as Nb,ba as Ob,Ra as Pb,Da as Qb,ga as Rb,Pa as Sb,Aa as Tb,Ia as Ub,Na as Vb,wa as Wb,ka as Xb,Ja as Yb,$a as Zb,Wa as _b,La as $b,Ha as ac,Ma as bc,za as cc,Va as dc,Ka as ec,Ya as fc,Za as gc,tm as hc,rm as ic,Om as jc,Pm as kc,Am as lc,Em as mc,Nm as nc,vm as oc,Um as pc,$m as qc,Gm as rc,Wm as sc,Lm as tc,Bm as uc,Mm as vc,qm as wc,zm as xc,Vm as yc,fc as zc,R as Ac,jc as Bc,Cc};
//# sourceMappingURL=chunk-IKZBOPD7.js.map